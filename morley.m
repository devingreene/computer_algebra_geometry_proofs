F = frac (ZZ[a,b])
R = F[c_1..c_3,s_1..s_3]

I = (
    c_1^3 - 3*c_1*s_1^2 - a,
    3*c_1^2*s_1 - s_1^3 - b,
    c_2^3 - 3*c_2*s_2^2 - (-a + 1)/(a^2 - 2*a + b^2 + 1),
    3*c_2^2*s_2 - s_2^3 - b/(a^2 - 2*a + b^2 + 1),
    c_3^3 - 3*c_3*s_3^2 - (a^2 - a + b^2)/(a^2 + b^2),
    3*c_3^2*s_3 - s_3^3 - b/(a^2 + b^2)
)

Q = R/I

a1 = matrix{{0,0,1},{c_1,s_1,1}}
a2 = matrix{{1,0,1},{1 + c_2^2 - s_2^2,2*c_2*s_2,1}}
a3 = matrix{{1,0,1},{1 + c_2,s_2,1}}
a4 = matrix{{a,b,1},{a + c_3^2 - s_3^2,b + 2*c_3*s_3,1}}
a5 = matrix{{a,b,1},{a + c_3,b + s_3,1}}
a6 = matrix{{0,0,1},{c_1^2 - s_1^2,2*c_1*s_1,1}}

l1 = det(a1_{1,2})|det(a1_{2,0})|det(a1_{0,1})
l2 = det(a2_{1,2})|det(a2_{2,0})|det(a2_{0,1})
l3 = det(a3_{1,2})|det(a3_{2,0})|det(a3_{0,1})
l4 = det(a4_{1,2})|det(a4_{2,0})|det(a4_{0,1})
l5 = det(a5_{1,2})|det(a5_{2,0})|det(a5_{0,1})
l6 = det(a6_{1,2})|det(a6_{2,0})|det(a6_{0,1})

b1 = l1||l2
b2 = l3||l4
b3 = l5||l6

p1 = det(b1_{1,2})|det(b1_{2,0})|det(b1_{0,1})
p2 = det(b2_{1,2})|det(b2_{2,0})|det(b2_{0,1})
p3 = det(b3_{1,2})|det(b3_{2,0})|det(b3_{0,1})

print (p1||p2||p3)
